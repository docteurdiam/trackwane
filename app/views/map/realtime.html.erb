<% content_for :scripts do %>
  <script src="http://js.pusher.com/1.11/pusher.min.js"></script>
<% end %>

<%=render :partial => "shared/popup" %>
<%=render :partial => "place_popup" %>

<div id="canvas">
    <div id="map"></div>
  <div class="column">
    <%= render :partial => "map/realtime/trackers/panel" %>
    <div id="feature-panel" class="panel" style="margin-top: 20px">
      <div class="menu">
        <ul>
          <li><a class="speed-alarms" href="#">Speed Alarms</a></li>
          <li><a class="geofence-alarms" href="#">Geofence Alarms</a></li>
          <li><a class="places" href="#" style="font-weight: bold">Places</a></li>
        </ul>
      </div>
      <div class="clear"></div>
      <%= render :partial => "map/realtime/geofence_alarms/panel" %>
      <%= render :partial => "map/realtime/speed_alarms/panel" %>
      <%= render :partial => "map/realtime/places/panel" %>
    </div>
  </div>
</div>

<style type="text/css">
  .btn-add {font-weight: bold; margin: 5px 10px; display: inline-block;}
  #feature-panel .menu {width: 100%; height: 32px; margin-top: 6px}
  #feature-panel .menu li {float: left; display: inline-block; padding: 4px}
  #feature-panel .menu li a {background-color: #111; border-radius: 3px; padding: 4px}
  #canvas {background-image: none}
</style>

<script type="text/javascript">
  $(function() {
    window.runtime = new Trackwane.Controllers.RealtimeController({el: "#canvas", events: gon.events, extent: gon.extent, geofence_alarms: gon.geofence_alarms, speed_alarms: gon.speed_alarms, devices: gon.devices, places: gon.places});
  });
</script>
